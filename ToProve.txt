ğŸ§ª TXT: Pasos para probar que TODO funciona

GuÃ¡rdalo como CHECKLIST.txt si quieres.

ğŸ§ª Pruebas completas de la prÃ¡ctica 3 (CHECKLIST)
ğŸ”§ 1. Arrancar el proyecto
cd P3/docker
docker compose up --build


Esperar hasta ver:

database system is ready to accept connections

ğŸ‘¤ 2. Probar User Service
Crear usuario:
curl -X PUT http://localhost:5050/user \
  -H "Content-Type: application/json" \
  -d '{"name": "alice", "password": "1234"}'

Login:
curl -X POST http://localhost:5050/user \
  -H "Content-Type: application/json" \
  -d '{"name": "alice", "password": "1234"}'

ğŸ¬ 3. Probar catÃ¡logo
Listado de pelÃ­culas:
curl http://localhost:5051/movies

PelÃ­cula por ID:
curl http://localhost:5051/movies/1

ğŸ›’ 4. Probar carrito persistente
AÃ±adir pelÃ­cula:
curl -X PUT http://localhost:5051/cart/1 \
  -H "Content-Type: application/json" \
  -d '{"client_id": 2}'

Ver carrito:
curl "http://localhost:5051/cart?client_id=2"

ğŸ’° 5. AÃ±adir crÃ©dito
curl -X POST http://localhost:5051/user/credit \
  -H "Content-Type: application/json" \
  -d '{"client_id": 2, "amount": 100}'

ğŸ§¾ 6. Checkout (aquÃ­ se activa el pg_sleep)
curl -X POST http://localhost:5051/cart/checkout \
  -H "Content-Type: application/json" \
  -d '{"client_id": 2}'

Durante los 10s de espera:

En otra terminal, intenta:

UPDATE clientes SET descuento_percent = 20 WHERE id = 2;


â†’ VerÃ¡s bloqueo o deadlock segÃºn el orden de las transacciones.

ğŸ“Š 7. Probar /estadisticaVentas
curl http://localhost:5051/estadisticaVentas/2024/Spain

ğŸ‘¥ 8. Probar /clientesSinPedidos
curl http://localhost:5051/clientesSinPedidos

ğŸ’¥ 9. Probar /borraPais y derivados
VersiÃ³n correcta:
curl -X POST http://localhost:5051/borraPais/Spain

Incorrecta:
curl -X POST http://localhost:5051/borraPaisIncorrecto/Spain

Intermedia:
curl -X POST http://localhost:5051/borraPaisIntermedio/Spain


Comprobar en BD que los efectos coinciden con la memoria.

ğŸ‰ SI TODO ESTO FUNCIONA â†’ PRÃCTICA PERFECTA